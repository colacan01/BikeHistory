<div class="container">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2>자전거 정비 기록</h2>
    <a [routerLink]="['/service-records/new']" class="btn btn-primary">
      <i class="bi bi-plus-circle"></i> 새 정비 기록
    </a>
  </div>

  <div *ngIf="isLoading" class="text-center my-5">
    <div class="spinner-border" role="status">
      <span class="visually-hidden">로딩 중...</span>
    </div>
  </div>

  <div *ngIf="!isLoading && serviceRecords.length === 0" class="alert alert-info">
    등록된 정비 기록이 없습니다.
  </div>

  <div *ngIf="!isLoading && serviceRecords.length > 0" class="table-responsive">
    <table class="table table-striped table-hover">
      <thead>
        <tr>
          <th>ID</th>
          <th>정비일자</th>
          <th>자전거 정보</th>
          <th>정비유형</th>
          <th>정비상태</th>
          <th>정비샵</th>
          <th>비용</th>
          <th>작업</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let record of serviceRecords">
          <td>{{ record.id }}</td>
          <td>{{ record.serviceDate | date:'yyyy-MM-dd' }}</td>
          <td>{{ record.bikeFrame?.frameNumber }}</td>
          <td>{{ getServiceTypeName(record.serviceType) }}</td>
          <td>
            <span class="badge" [ngClass]="{
              'bg-warning': record.serviceStatus === 0,
              'bg-primary': record.serviceStatus === 1,
              'bg-success': record.serviceStatus === 2,
              'bg-danger': record.serviceStatus === 3
            }">
              {{ getServiceStatusName(record.serviceStatus) }}
            </span>
          </td>
          <td>{{ record.serviceShop?.userName }}</td>
          <td>{{ record.cost | currency:'KRW':'symbol':'1.0-0' }}</td>
          <td>
            <div class="btn-group">
              <a [routerLink]="['/service-records', record.id]" class="btn btn-sm btn-outline-primary">
                <i class="bi bi-eye"></i>
              </a>
              <a [routerLink]="['/service-records/edit', record.id]" class="btn btn-sm btn-outline-secondary">
                <i class="bi bi-pencil"></i>
              </a>
              <button *ngIf="isAdmin" (click)="deleteRecord(record.id)" class="btn btn-sm btn-outline-danger">
                <i class="bi bi-trash"></i>
              </button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
