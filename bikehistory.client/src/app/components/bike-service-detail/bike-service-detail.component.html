<div class="container">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2>정비 기록 상세</h2>
    <div>
      <a [routerLink]="['/service-records']" class="btn btn-outline-primary me-2">
        <i class="bi bi-arrow-left"></i> 목록으로
      </a>
      <a [routerLink]="['/service-records/edit', serviceRecord?.id]" class="btn btn-warning">
        <i class="bi bi-pencil"></i> 수정
      </a>
    </div>
  </div>

  <div *ngIf="isLoading" class="text-center my-5">
    <div class="spinner-border" role="status">
      <span class="visually-hidden">로딩 중...</span>
    </div>
  </div>

  <div *ngIf="errorMessage" class="alert alert-danger">
    {{ errorMessage }}
  </div>

  <div *ngIf="!isLoading && serviceRecord" class="card">
    <div class="card-header bg-light">
      <h4>ID: {{ serviceRecord.id }} - {{ serviceRecord.bikeFrame?.frameNumber }} 정비기록</h4>
    </div>
    <div class="card-body">
      <div class="row">
        <div class="col-md-6 mb-3">
          <h5>기본 정보</h5>
          <dl class="row">
            <dt class="col-sm-4">정비일자</dt>
            <dd class="col-sm-8">{{ serviceRecord.serviceDate | date:'yyyy-MM-dd' }}</dd>

            <dt class="col-sm-4">정비 유형</dt>
            <dd class="col-sm-8">{{ getServiceTypeName(serviceRecord.serviceType) }}</dd>

            <dt class="col-sm-4">정비 상태</dt>
            <dd class="col-sm-8">
              <span class="badge" [ngClass]="{
                'bg-warning': serviceRecord.serviceStatus === 0,
                'bg-primary': serviceRecord.serviceStatus === 1,
                'bg-success': serviceRecord.serviceStatus === 2,
                'bg-danger': serviceRecord.serviceStatus === 3
              }">
                {{ getServiceStatusName(serviceRecord.serviceStatus) }}
              </span>
            </dd>

            <dt class="col-sm-4">정비 비용</dt>
            <dd class="col-sm-8">{{ serviceRecord.cost | currency:'KRW':'symbol':'1.0-0' }}</dd>
            
            <dt class="col-sm-4">다음 정비 예정일</dt>
            <dd class="col-sm-8">{{ serviceRecord.nextServiceDate | date:'yyyy-MM-dd' || '미정' }}</dd>
          </dl>
        </div>
        <div class="col-md-6 mb-3">
          <h5>자전거 및 정비샵 정보</h5>
          <dl class="row">
            <dt class="col-sm-4">자전거 프레임</dt>
            <dd class="col-sm-8">{{ serviceRecord.bikeFrame?.frameNumber }}</dd>
            
            <dt class="col-sm-4">자전거 모델</dt>
            <dd class="col-sm-8">{{ serviceRecord.bikeFrame?.model || '정보 없음' }}</dd>
            
            <dt class="col-sm-4">정비샵</dt>
            <dd class="col-sm-8">{{ serviceRecord.serviceShop?.userName }}</dd>
            
            <dt class="col-sm-4">정비샵 연락처</dt>
            <dd class="col-sm-8">{{ serviceRecord.serviceShop?.email }}</dd>
          </dl>
        </div>
      </div>
      
      <div class="row">
        <div class="col-12 mb-3">
          <h5>정비 상세 내역</h5>
          <div class="p-3 bg-light rounded">
            {{ serviceRecord.serviceDetails }}
          </div>
        </div>
        
        <div class="col-md-6 mb-3" *ngIf="serviceRecord.partDetails">
          <h5>사용 부품 정보</h5>
          <div class="p-3 bg-light rounded">
            {{ serviceRecord.partDetails }}
          </div>
        </div>
        
        <div class="col-md-6 mb-3" *ngIf="serviceRecord.warrantyInfo">
          <h5>보증 정보</h5>
          <div class="p-3 bg-light rounded">
            {{ serviceRecord.warrantyInfo }}
          </div>
        </div>
      </div>
      
      <div class="row">
        <div class="col-12">
          <small class="text-muted">
            생성일: {{ serviceRecord.createdDate | date:'yyyy-MM-dd HH:mm' }}
            <span *ngIf="serviceRecord.modifiedDate">
              | 최종 수정일: {{ serviceRecord.modifiedDate | date:'yyyy-MM-dd HH:mm' }}
            </span>
          </small>
        </div>
      </div>
    </div>
  </div>
</div>
