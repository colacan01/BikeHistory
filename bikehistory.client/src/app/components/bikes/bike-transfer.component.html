<div class="bike-transfer-container">
  <!-- Header Section -->
  <div class="transfer-header">
    <div class="header-content">
      <div class="title-section">
        <div class="transfer-icon">
          <svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M17 1L21 5L17 9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            <path d="M3 11V9A4 4 0 0 1 7 5H21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            <path d="M7 23L3 19L7 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            <path d="M21 13V15A4 4 0 0 1 17 19H3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
        </div>
        <h1 class="page-title">자전거 소유권 이전</h1>
        <p class="page-subtitle">다른 사용자에게 자전거를 이전하세요</p>
      </div>
    </div>
  </div>

  <!-- Status Messages -->
  <div class="status-message loading-message" *ngIf="loading">
    <div class="status-icon">
      <div class="loading-spinner"></div>
    </div>
    <div class="status-content">
      <h3>자전거 정보를 불러오는 중...</h3>
      <p>자전거 정보를 가져오는 동안 잠시 기다려 주세요</p>
    </div>
  </div>

  <div class="status-message error-message" *ngIf="error">
    <div class="status-icon">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" />
        <line x1="15" y1="9" x2="9" y2="15" stroke="currentColor" stroke-width="2" />
        <line x1="9" y1="9" x2="15" y2="15" stroke="currentColor" stroke-width="2" />
      </svg>
    </div>
    <div class="status-content">
      <h3>자전거 정보 로드 실패</h3>
      <p>{{error}}</p>
    </div>
  </div>

  <!-- Main Content -->
  <div *ngIf="bike && !loading" class="transfer-content">
    <!-- Bike Information Card -->
    <div class="info-card">
      <div class="card-header">
        <div class="card-icon">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="18.5" cy="17.5" r="3.5" stroke="currentColor" stroke-width="2" />
            <circle cx="5.5" cy="17.5" r="3.5" stroke="currentColor" stroke-width="2" />
            <path d="M15 6a1 1 0 0 0-1-1H6.5a1 1 0 0 0-.8.4L3.9 8.7A1 1 0 0 0 4.7 10H19a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1z" stroke="currentColor" stroke-width="2" />
          </svg>
        </div>
        <h2 class="card-title">자전거 정보</h2>
      </div>

      <div class="card-body">
        <div class="bike-details">
          <div class="detail-item">
            <div class="detail-icon">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect x="2" y="3" width="20" height="14" rx="2" ry="2" stroke="currentColor" stroke-width="2" />
                <line x1="8" y1="21" x2="16" y2="21" stroke="currentColor" stroke-width="2" />
                <line x1="12" y1="17" x2="12" y2="21" stroke="currentColor" stroke-width="2" />
              </svg>
            </div>
            <div class="detail-content">
              <span class="detail-label">프레임 번호</span>
              <span class="detail-value">{{bike.frameNumber}}</span>
            </div>
          </div>

          <div class="detail-item">
            <div class="detail-icon">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M20 7H4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2Z" stroke="currentColor" stroke-width="2" />
                <path d="M20 7v10a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V7" stroke="currentColor" stroke-width="2" />
              </svg>
            </div>
            <div class="detail-content">
              <span class="detail-label">유형</span>
              <span class="detail-value">{{bike.bikeType?.name || '알 수 없는 유형'}}</span>
            </div>
          </div>

          <div class="detail-item">
            <div class="detail-icon">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 2L13.09 8.26L20 9L13.09 9.74L12 16L10.91 9.74L4 9L10.91 8.26L12 2Z" stroke="currentColor" stroke-width="2" />
              </svg>
            </div>
            <div class="detail-content">
              <span class="detail-label">브랜드</span>
              <span class="detail-value">{{bike.brand?.name || '알 수 없는 브랜드'}}</span>
            </div>
          </div>

          <div class="detail-item" *ngIf="bike.model">
            <div class="detail-icon">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20" stroke="currentColor" stroke-width="2" />
                <path d="M6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20" stroke="currentColor" stroke-width="2" />
              </svg>
            </div>
            <div class="detail-content">
              <span class="detail-label">모델</span>
              <span class="detail-value">{{bike.model}}</span>
            </div>
          </div>

          <div class="detail-item" *ngIf="bike.manufactureYear != null">
            <div class="detail-icon">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2" stroke="currentColor" stroke-width="2" />
                <line x1="16" y1="2" x2="16" y2="6" stroke="currentColor" stroke-width="2" />
                <line x1="8" y1="2" x2="8" y2="6" stroke="currentColor" stroke-width="2" />
                <line x1="3" y1="10" x2="21" y2="10" stroke="currentColor" stroke-width="2" />
              </svg>
            </div>
            <div class="detail-content">
              <span class="detail-label">연식</span>
              <span class="detail-value">{{bike.manufactureYear}}</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Transfer Form Card -->
    <div class="transfer-card">
      <div class="card-header">
        <div class="card-icon">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M16 21V19A4 4 0 0 0 12 15H5A4 4 0 0 0 1 19V21" stroke="currentColor" stroke-width="2" />
            <circle cx="8.5" cy="7" r="4" stroke="currentColor" stroke-width="2" />
            <path d="M20 8V6A4 4 0 0 0 16 2H15" stroke="currentColor" stroke-width="2" />
            <line x1="17" y1="11" x2="23" y2="11" stroke="currentColor" stroke-width="2" />
          </svg>
        </div>
        <h2 class="card-title">이전 세부사항</h2>
      </div>

      <div class="card-body">
        <form [formGroup]="transferForm" (ngSubmit)="onSubmit()">
          <!-- New Owner Email -->
          <div class="form-group">
            <label for="newOwnerId" class="form-label">새 소유자 이메일 <span class="required">*</span></label>
            <div class="input-wrapper">
              <div class="input-icon">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M4 4H20C21.1 4 22 4.9 22 6V18C22 19.1 21.1 20 20 20H4C2.9 20 2 19.1 2 18V6C2 4.9 2.9 4 4 4Z" stroke="currentColor" stroke-width="2" />
                  <polyline points="22,6 12,13 2,6" stroke="currentColor" stroke-width="2" />
                </svg>
              </div>
              <input type="email"
                     id="newOwnerId"
                     formControlName="newOwnerId"
                     class="form-input"
                     [ngClass]="{ 'error': submitted && f['newOwnerId'].errors }"
                     placeholder="새 소유자의 이메일 주소를 입력하세요" />
            </div>
            <div *ngIf="submitted && f['newOwnerId'].errors" class="field-error">
              <div *ngIf="f['newOwnerId'].errors['required']">새 소유자 이메일은 필수입니다</div>
              <div *ngIf="f['newOwnerId'].errors['email']">유효한 이메일 주소를 입력하세요</div>
            </div>
          </div>

          <!-- Transfer Notes -->
          <div class="form-group">
            <label for="notes" class="form-label">이전 메모</label>
            <div class="textarea-wrapper">
              <div class="textarea-icon">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" stroke="currentColor" stroke-width="2" />
                  <polyline points="14,2 14,8 20,8" stroke="currentColor" stroke-width="2" />
                  <line x1="16" y1="13" x2="8" y2="13" stroke="currentColor" stroke-width="2" />
                  <line x1="16" y1="17" x2="8" y2="17" stroke="currentColor" stroke-width="2" />
                </svg>
              </div>
              <textarea id="notes"
                        formControlName="notes"
                        class="form-textarea"
                        rows="4"
                        placeholder="이 이전에 대한 메모를 추가하세요 (선택사항)"></textarea>
            </div>
          </div>

          <!-- Warning Alert -->
          <div class="warning-alert">
            <div class="warning-icon">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z" stroke="currentColor" stroke-width="2" />
                <line x1="12" y1="9" x2="12" y2="13" stroke="currentColor" stroke-width="2" />
                <circle cx="12" cy="17" r="1" fill="currentColor" />
              </svg>
            </div>
            <div class="warning-content">
              <h4 class="warning-title">중요 안내</h4>
              <p class="warning-text">이 작업은 자전거의 소유권을 다른 사용자에게 이전합니다. 이전 후에는 더 이상 이 자전거를 관리할 수 없습니다.</p>
            </div>
          </div>

          <!-- Action Buttons -->
          <div class="form-actions">
            <button type="button" class="cancel-btn" (click)="goBack()">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M19 12H5M12 19L5 12L12 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
              </svg>
              취소
            </button>

            <button type="submit" class="transfer-btn" [disabled]="transferring">
              <span *ngIf="transferring" class="loading-spinner"></span>
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" *ngIf="!transferring">
                <path d="M17 1L21 5L17 9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                <path d="M3 11V9A4 4 0 0 1 7 5H21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                <path d="M7 23L3 19L7 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                <path d="M21 13V15A4 4 0 0 1 17 19H3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
              </svg>
              <span *ngIf="!transferring">소유권 이전</span>
              <span *ngIf="transferring">이전 중...</span>
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
